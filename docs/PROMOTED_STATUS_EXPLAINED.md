# ğŸ¤” PROMOTED ìƒíƒœ ì´í•´í•˜ê¸°

## ì§ˆë¬¸: `waiting.status = PROMOTED`ëŠ” ì–´ë””ì— ì“°ì´ë‚˜ìš”?

### ğŸ“Š ê°„ë‹¨ ìš”ì•½

**ê²°ë¡ ë¶€í„° ë§í•˜ë©´**: `PROMOTED`ëŠ” **ê¸°ë¡ìš© ìƒíƒœ**ì…ë‹ˆë‹¤. ì‹¤ì œ ìŠ¹ê²© íŒë‹¨ì€ `training_course_application.status`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ğŸ” ìƒì„¸ ì„¤ëª…

### 1. ë‘ ê°œì˜ ìƒíƒœê°€ ì¡´ì¬í•©ë‹ˆë‹¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ training_course_application í…Œì´ë¸”       â”‚  â† ë©”ì¸ ìƒíƒœ (ì¤‘ìš”!)
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ app_id     â”‚ status   â”‚ dog_id   â”‚    â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚ â”‚ 1          â”‚ WAITING  â”‚ 5        â”‚    â”‚
â”‚ â”‚            â”‚    â†“                â”‚    â”‚
â”‚ â”‚ 1          â”‚ ACCEPT   â”‚ 5        â”‚    â”‚ â† ìŠ¹ê²©!
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ waiting í…Œì´ë¸”                            â”‚  â† ë¶€ê°€ ì •ë³´
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ app_id     â”‚ status   â”‚ is_approved â”‚ â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ â”‚ 1          â”‚ WAITING  â”‚ true        â”‚ â”‚
â”‚ â”‚            â”‚    â†“                   â”‚ â”‚
â”‚ â”‚ 1          â”‚ PROMOTED â”‚ true        â”‚ â”‚ â† ì´ë ¥ ê¸°ë¡
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. ì½”ë“œì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ë‚˜ìš”?

#### ìŠ¹ê²© ì‹œì  (PaymentDeadlineScheduler, TrainerUserService)

```java
// 1. ë©”ì¸ ìƒíƒœ ë³€ê²½ (ì¤‘ìš”!)
trainerUserDao.updateApplicationStatusSimple(nextApplicationId, "ACCEPT");
//   â†’ training_course_application.status = 'ACCEPT'

// 2. ëŒ€ê¸° ìƒíƒœ ê¸°ë¡ (ê¸°ë¡ìš©)
trainerUserDao.updateWaitingStatus(nextApplicationId, "PROMOTED");
//   â†’ waiting.status = 'PROMOTED'

// 3. ê²°ì œ ê¸°í•œ ì„¤ì •
trainerUserDao.updatePaymentDeadline(nextApplicationId, 24);
```

#### SQL ì¿¼ë¦¬

```sql
-- TrainerUserDAO.xml
<update id="updateWaitingStatus">
    UPDATE waiting
    SET status = #{status},        -- 'PROMOTED'
        updated_at = NOW()
    WHERE application_id = #{applicationId}
      AND is_deleted = 0
</update>
```

---

### 3. ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ

#### âŒ ì¡°íšŒì— ì‚¬ìš©ë˜ì§€ ì•ŠìŒ (í˜„ì¬)

```java
// ì´ëŸ° ì½”ë“œê°€ ì—†ìŒ!
if (waiting.getStatus().equals("PROMOTED")) {
    // ìŠ¹ê²©ëœ ì‚¬ìš©ì ì²˜ë¦¬...
}

// ì‹¤ì œë¡œëŠ” ì´ë ‡ê²Œ ì‚¬ìš©
if (application.getStatus().equals("ACCEPT")) {
    // ìŠ¹ê²©ëœ ì‚¬ìš©ì ì²˜ë¦¬ âœ…
}
```

#### âœ… ê°€ëŠ¥í•œ í™œìš© ë°©ì•ˆ (ë¯¸ë˜)

1. **í†µê³„ ì¡°íšŒ**
```sql
-- ì˜¤ëŠ˜ ìë™ ìŠ¹ê²©ëœ ì‚¬ìš©ì ìˆ˜
SELECT COUNT(*)
FROM waiting
WHERE status = 'PROMOTED'
  AND DATE(updated_at) = CURDATE();
```

2. **íˆìŠ¤í† ë¦¬ ì¶”ì **
```sql
-- ì´ ì‚¬ìš©ìê°€ ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ë˜ì—ˆëŠ”ì§€ í™•ì¸
SELECT status
FROM waiting
WHERE application_id = 123;
-- ê²°ê³¼: 'PROMOTED' â†’ ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ë¨
```

3. **ì•Œë¦¼ ë°œì†¡**
```java
// ìŠ¹ê²©ëœ ì‚¬ìš©ìì—ê²Œë§Œ íŠ¹ë³„ ì•Œë¦¼
List<Waiting> promoted = dao.findByStatus("PROMOTED");
for (Waiting w : promoted) {
    sendNotification(w.getApplicationId(), "ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ë˜ì—ˆìŠµë‹ˆë‹¤!");
}
```

---

### 4. ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆì„ê¹Œ?

#### ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (Separation of Concerns)

```
training_course_application
  - ì—­í• : ëª¨ë“  ì‹ ì²­ì˜ í˜„ì¬ ìƒíƒœ ê´€ë¦¬
  - ì‚¬ìš©ì²˜: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (ìŠ¹ì¸, ê²°ì œ ë“±)

waiting
  - ì—­í• : ëŒ€ê¸°ì—´ë§Œì˜ íŠ¹ìˆ˜ ì •ë³´ ì €ì¥
  - ì‚¬ìš©ì²˜: ëŒ€ê¸° ìˆœë²ˆ, ìŠ¹ê²© ì´ë ¥, í†µê³„
```

#### ì¥ì 

1. **ëª…í™•í•œ ì´ë ¥ ì¶”ì **
   - "ì´ ì‚¬ëŒì€ ëŒ€ê¸°í–ˆë‹¤ê°€ ìŠ¹ê²©ë¨" vs "ì²˜ìŒë¶€í„° ë°”ë¡œ ìŠ¹ì¸ë¨" êµ¬ë¶„ ê°€ëŠ¥

2. **í™•ì¥ ê°€ëŠ¥ì„±**
   - ë‚˜ì¤‘ì— ëŒ€ê¸°ì—´ ë¶„ì„ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ìœ ìš©

3. **ë°ì´í„° ë¬´ê²°ì„±**
   - `waiting` í…Œì´ë¸” ì‚­ì œí•´ë„ ë©”ì¸ ì‹ ì²­ ë¡œì§ì€ ì˜í–¥ ì—†ìŒ

---

### 5. ìƒíƒœë³„ ì˜ë¯¸ ì •ë¦¬

| ìƒíƒœ | ì˜ë¯¸ | ì„¤ì • ì‹œì  |
|------|------|-----------|
| **WAITING** | ëŒ€ê¸° ì¤‘ | ì •ì› ì´ˆê³¼ë¡œ ì‹ ì²­ ì‹œ |
| **PROMOTED** | ìŠ¹ê²©ë¨ (ì´ë ¥) | ìë™ ìŠ¹ê²© ì™„ë£Œ ì‹œ |
| **CANCELLED** | ì·¨ì†Œë¨ | ì‚¬ìš©ìê°€ ëŒ€ê¸° ì·¨ì†Œ ì‹œ |
| **EXPIRED** | ë§Œë£Œë¨ | ìˆ˜ì—… ì‹œì‘ 24ì‹œê°„ ì „ ë¯¸ìŠ¹ì¸ ì‹œ |

---

### 6. í•µì‹¬ ì •ë¦¬

#### ğŸ¯ ì¤‘ìš”í•œ ê²ƒ

```java
// ì‹¤ì œ ìŠ¹ê²© ì—¬ë¶€ëŠ” ì—¬ê¸°ì„œ íŒë‹¨!
training_course_application.status == "ACCEPT"
```

#### ğŸ“ ë³´ì¡° ì •ë³´

```java
// ê¸°ë¡ìš© (ë‚˜ì¤‘ì— "ì–´ë””ì„œ ì™”ëŠ”ì§€" íŒŒì•…)
waiting.status == "PROMOTED"
```

#### ğŸ’¡ í•œ ë¬¸ì¥ ìš”ì•½

> **`PROMOTED`ëŠ” "ì´ ì‚¬ëŒì´ ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ë˜ì—ˆë‹¤"ëŠ” ì´ë ¥ì„ ê¸°ë¡í•˜ëŠ” ìƒíƒœì…ë‹ˆë‹¤.  
> ì‹¤ì œ ìŠ¹ê²© íŒë‹¨ì€ `training_course_application.status = ACCEPT`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.**

---

## ğŸ”§ ê°œì„  ì œì•ˆ

### í˜„ì¬ ë¬¸ì œì 

- `PROMOTED` ìƒíƒœë¥¼ ì„¤ì •í•˜ì§€ë§Œ, ì¡°íšŒ/í™œìš©í•˜ëŠ” ë¡œì§ì´ ì—†ìŒ
- ë°ì´í„°ë§Œ ìŒ“ì´ê³  ì‹¤ì œ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

### ê°œì„  ë°©ì•ˆ

#### ì˜µì…˜ 1: í†µê³„ ê¸°ëŠ¥ ì¶”ê°€
```java
@Service
public class WaitingStatisticsService {
    
    // ì˜¤ëŠ˜ ìŠ¹ê²©ëœ ëŒ€ê¸°ì ìˆ˜
    public int getTodayPromotedCount() {
        return waitingDao.countByStatusAndDate("PROMOTED", LocalDate.now());
    }
    
    // ì„¸ì…˜ë³„ ìŠ¹ê²©ë¥ 
    public double getPromotionRate(Long sessionId) {
        int total = waitingDao.countBySession(sessionId);
        int promoted = waitingDao.countBySessionAndStatus(sessionId, "PROMOTED");
        return (double) promoted / total * 100;
    }
}
```

#### ì˜µì…˜ 2: ì•Œë¦¼ ì‹œìŠ¤í…œ ì—°ë™
```java
// ìŠ¹ê²©ëœ ì‚¬ìš©ìì—ê²Œ íŠ¹ë³„ ë©”ì‹œì§€
if (waiting.getStatus().equals("PROMOTED")) {
    sendNotification(
        applicationId,
        "ì¶•í•˜í•©ë‹ˆë‹¤! ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ë˜ì–´ ìˆ˜ì—…ì— ì°¸ì—¬í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. " +
        "24ì‹œê°„ ë‚´ì— ê²°ì œí•´ ì£¼ì„¸ìš”."
    );
}
```

#### ì˜µì…˜ 3: ë‹¨ìˆœí™” (ìƒíƒœ ì œê±°)
```java
// PROMOTED ìƒíƒœë¥¼ ì•„ì˜ˆ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì•ˆ
// ëŒ€ì‹  is_approvedë§Œìœ¼ë¡œ íŒë‹¨
if (waiting.getIsApproved() && application.getStatus().equals("ACCEPT")) {
    // ì´ ì‚¬ëŒì€ ëŒ€ê¸°ì—ì„œ ìŠ¹ê²©ëœ ê²ƒ
}
```

---

**ì‘ì„±ì¼**: 2026-01-16  
**ë²„ì „**: 1.0

